
#TCP ì™€ UDP
- HTTP(Hypertext Transfer Protocol), **TCP**(Transmission Control Protocol), **UDP**(User Datagram Protocol) ëŠ” ë‹¤ **í”„ë¡œí† ì½œ(Protocol)** ì´ë‹¤.   
> í”„ë¡œí† ì½œ(Protocol) : ì»´í“¨í„° ë˜ëŠ” ì „ì ê¸°ê¸° ê°„ì˜ ì›í™œí•œ í†µì‹ ì„ ìœ„í•´ ì§€í‚¤ê¸°ë¡œ í•œ ê·œì•½, í†µì‹  ê·œì•½  

### OSI 7 Layerë³„ í”„ë¡œí† ì½œ êµ¬ì¡°
<img src="assets/tcp-osi.png" width="300">  <img src="assets/tcp-osi2.png" width="400">

## TCP

- TCP (Transmission Control Protocol: ì „ì†¡ ì œì–´ í”„ë¡œí† ì½œ): ì—°ê²° ì¤‘ì‹¬ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì „ì†¡í•œë‹¤. ë¨¼ì € ë°œì‹ ìì™€ ìˆ˜ì‹ ì ê°„ì— ì„¸ ë‹¨ê³„(3 Way Handshake)ë¡œ ì—°ê²°ì„ ì„¤ì •í•˜ê³ , ë°ì´í„° ì „ì†¡ ì¤‘ì—ë„ ê° íŒ¨í‚·ì´ ë„ì°©í–ˆëŠ”ì§€ í™•ì¸í•˜ë©° ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì¬ì „ì†¡ì„ ìš”ì²­í•œë‹¤. ì´ë¡œ ì¸í•´ ì „ì†¡ ì†ë„ëŠ” ëŠë ¤ì§ˆ ìˆ˜ ìˆì§€ë§Œ, ë°ì´í„°ì˜ ì‹ ë¢°ì„±ì´ ë³´ì¥ëœë‹¤.   
  - TCP ëŠ” ì‹ ë¢°ì„± í”„ë¡œí† ì½œë‹µê²Œ, í•œë²ˆ í†µì‹ í•˜ëŠ”ë° ë°°ë‹¬ í•˜ê¸° ì „ì— ëª©ì ì§€ê°€ ë¬´ì‚¬í•œì§€ ë¯¸ë¦¬ í™•ì¸í•˜ê³ , ë°°ë‹¬ì´ ëë‚˜ê³ ë„ ë˜ í™•ì¸í•´ì£¼ëŠ” í”„ë¡œí† ì½œ
  - TCP ëŠ” ë‹¨ì–´ ê·¸ëŒ€ë¡œ ì›í™œí•œ í†µì‹ ì„ ìœ„í•´ ì „ì†¡ íë¦„ì„ ì œì–´í•˜ëŠ” ê¸°ëŠ¥ì„ í”„ë¡œí† ì½œ ìì²´ì— í¬í•¨í•˜ê³  ìˆë‹¤. 
  
  >3Way Handshake - í†µì‹ ì„ ì‹œì‘í•  ë•Œ í™•ì¸ ê³¼ì •   
  >4Way Handshake - í†µì‹ ì„ ë§ˆì¹  ë•Œ í™•ì¸ ê³¼ì •

<img src="assets/tcp-3way.png" width="400"><img src="assets/tcp-header.png">

**TCP ì˜ ì „ì†¡ ì œì–´ ê¸°ë²• 3ê°€ì§€**
- íë¦„ ì œì–´(Flow Control) : ìˆ˜ì‹ ìê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°ì´í„° ì†ë„ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ì†¡ì‹  ì¸¡ì€ ìˆ˜ì‹ ì¸¡ì˜ ë°ì´í„° ì²˜ë¦¬ ì†ë„ë¥¼ íŒŒì•…í•˜ê³  ì–¼ë§ˆë‚˜ ë¹ ë¥´ê²Œ ì–´ëŠ ì •ë„ì˜ ë°ì´í„°ë¥¼ ì „ì†¡í•  ì§€ ì œì–´
  - ìŠ¬ë¼ì´ë”© ìœˆë„ìš°(Sliding Windows) ë°©ì‹ : Windowë¼ëŠ” ë°ì´í„°ë¥¼ ë‹´ëŠ” ê³µê°„ì„ ë™ì ìœ¼ë¡œ ì¡°ì ˆí•˜ì—¬ ë°ì´í„°ëŸ‰ì„ ì¡°ì ˆ
- ì˜¤ë¥˜ ì œì–´(Error Control) : í†µì‹  ë„ì¤‘ì— ë°ì´í„°ê°€ ìœ ì‹¤ë˜ê±°ë‚˜ ì˜ëª»ëœ ë°ì´í„°ê°€ ìˆ˜ì‹ ë˜ì—ˆì„ ê²½ìš° ëŒ€ì²˜
- í˜¼ì¡ ì œì–´(Congestion Control) : ë„¤íŠ¸ì›Œí¬ê°€ ë¶ˆì•ˆì •í•˜ì—¬ í˜¼ì¡ ìƒíƒœê°€ ê°ì§€ë˜ë©´ ì†¡ì‹ ì¸¡ì˜ ì „ì†¡ ë°ì´í„° í¬ê¸°ë¥¼ ì¡°ì ˆí•˜ì—¬ ì „ì†¡ëŸ‰ì„ ì¡°ì ˆí•œë‹¤.

### HTTPëŠ” ì–´ë–»ê²Œ TCP ìœ„ì—ì„œ ë™ì‘í• ê¹Œ?

**HTTP** : HTTP ë„ TCP ê¸°ë°˜ìœ¼ë¡œ 3 Way Handshake í›„ì— HTTP ìš”ì²­ì„ í†µí•´ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤.
1. `Client`ëŠ” ì„œë²„ì™€ 3 Way Handshakeë¡œ í†µì‹ ì„ ìœ„í•´ ì—°ê²°í•œë‹¤.(**ì—°ê²°ì§€í–¥ì **)
2. `Client`ì˜ HTTP ìš”ì²­ì€ TCPë¥¼ í†µí•´ íŒ¨í‚·ìœ¼ë¡œ ë‚˜ë‰˜ì–´ ì „ì†¡ë˜ë©°, **ìˆœì„œëŒ€ë¡œ** ì„œë²„ì— ì „ë‹¬ëœë‹¤.
3. `Server`ëŠ” HTTP ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ì¤€ë¹„í•œë‹¤. 
4. HTTP ì‘ë‹µë„ ìƒíƒœì½”ë“œì™€ í•¨ê»˜ í—¤ë”ì™€ ë³¸ë¬¸ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì´ ì‘ë‹µ ì—­ì‹œ TCPë¥¼ í†µí•´ íŒ¨í‚·ìœ¼ë¡œ ì „ì†¡ëœë‹¤.
5. ê° íŒ¨í‚·ì´ **ìˆœì„œëŒ€ë¡œ** í´ë¼ì´ì–¸íŠ¸ì— ë„ë‹¬í•˜ë„ë¡ ë³´ì¥ëœë‹¤.
6. ìš”ì²­ê³¼ ì‘ë‹µì´ ì¢…ë£Œë˜ë©´ `Client`ëŠ” ì—°ê²° ì¢…ë£Œë¥¼ ìœ„í•´ `FIN` íŒ¨í‚·ì„ ë‚ ë¦¬ë©°, 4 Way Handshakeë¡œ ì—°ê²°ì„ ì¢…ë£Œí•œë‹¤.
> ì´ ê³¼ì •ì—ì„œ TCP(í”„ë¡œí† ì½œ)ê°€ íŒ¨í‚·ì˜ ì†ì‹¤ì„ ê°ì§€í•˜ê³  ì¬ì „ì†¡ì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— HTTPëŠ” `ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨(OSI 7 ê³„ì¸µ)`ì—ì„œ ë°ì´í„°ì˜ ì „ì†¡ ì‹ ë¢°ì„±ì„ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ë‹¤.


### ì›¹ì†Œì¼“ì€ ì–´ë–»ê²Œ TCP ìœ„ì—ì„œ ë™ì‘í• ê¹Œ?
**ì›¹ì†Œì¼“** : ì›¹ì†Œì¼“(Web Socket) í”„ë¡œí† ì½œì€ HTTPì™€ëŠ” ë‹¤ë¥¸ í†µì‹  í”„ë¡œí† ì½œë¡œ ì›¹ ì„œë²„ì™€ ì›¹ ë¸Œë¼ìš°ì €ê°€ ì„œë¡œ ì‹¤ì‹œê°„ ë©”ì‹œì§€ë¥¼ êµí™˜í•˜ëŠ” ë°ì— ì‚¬ìš©ëœë‹¤.
ì›¹ì†Œì¼“ì€ TCP ì†Œì¼“ê³¼ ì´ë¦„ë§Œ ìœ ì‚¬í•  ë¿ ë¸Œë¼ìš°ì €ì˜ ì†Œì¼“ì´ë©°, ì›¹ì†Œì¼“ í”„ë¡œí† ì½œì€ **HTTP ì™€ ë™ì¼í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µì—ì„œ ë™ì‘í•œë‹¤.** ê·¸ë¦¬ê³  í‰ë¬¸ ë©”ì‹œì§€ ì „ì†¡ ë°©ì‹ì´ë¯€ë¡œ, SSL/TLS ë³´ì•ˆ ê³„ì¸µìœ¼ë¡œ ì•”í˜¸í™”ë˜ì–´ì•¼ ë°ì´í„° íƒˆì·¨ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.
1. ì›¹ì†Œì¼“ì€ HTTP ê¸°ë°˜ìœ¼ë¡œ ì´ˆê¸° ì—°ê²°ì„ ì„¤ì •í•©ë‹ˆë‹¤. (**HTTP Handshake**)
2. `Client`ëŠ” í‘œì¤€ HTTP ìš”ì²­ì„ í†µí•´ ì„œë²„ì— ì—°ê²°ì„ ì‹œë„í•˜ë©°, **ì—…ê·¸ë ˆì´ë“œ í—¤ë”(Upgrade: Websocket)** ë¥¼ í¬í•¨í•˜ì—¬ ì›¹ì†Œì¼“ìœ¼ë¡œ ì „í™˜ ìš”ì²­í•œë‹¤.
3. `Server`ê°€ ì›¹ì†Œì¼“ ì—°ê²°ì„ í—ˆìš©í•˜ë©´ `HTTP 101 Switching Protocols` ìƒíƒœ ì½”ë“œë¡œ ì‘ë‹µí•˜ì—¬ ì—°ê²°ì„ ì›¹ì†Œì¼“ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ í•œë‹¤.
4. ì´ì œ HTTPëŠ” ì—°ê²° ì„¤ì •ì—ë§Œ ì‚¬ìš©ë˜ë©°, ì´í›„ ë°ì´í„° ì „ì†¡ì€ ì›¹ì†Œì¼“ í”„ë¡œí† ì½œì„ í†µí•´ TCPì—°ê²°ì„ ì§ì ‘ ì´ìš©í•´ ì´ë¤„ì§„ë‹¤.
> TCP ì˜ `3Way Handshake`ì™€ ì›¹ì†Œì¼“ì˜ `HTTP Handshake` ëŠ” í”„ë¡œí† ì½œì˜ ê³„ì¸µì´ ë‹¤ë¥´ë‹¤.   
> TCPì˜ `3Way Handshake`ì˜ ê²½ìš°ëŠ” ì „ì†¡ ê³„ì¸µ (OSI 4 ê³„ì¸µ)ì—ì„œ ì´ë£¨ì–´ ì§€ì§€ë§Œ,    
> ì›¹ì†Œì¼“ì˜ `HTTP Handshake`ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ(OSI 7 ê³„ì¸µ)ì—ì„œ ì´ë£¨ì–´ì§„ë‹¤. 

---

## UDP 

- UDP (User Datagram Protocol: ì‚¬ìš©ì ë°ì´í„°ê·¸ë¨ í”„ë¡œí† ì½œ): ë¹„ì—°ê²°í˜• ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì „ì†¡í•œë‹¤. ë°ì´í„°ëŠ” ë³„ë„ì˜ í™•ì¸ ê³¼ì • ì—†ì´ ë‹¨ì¼ íŒ¨í‚·ìœ¼ë¡œ ë³´ë‚´ì§€ë©°, ì†ì‹¤ì´ë‚˜ ì˜¤ë¥˜ë¥¼ í™•ì¸í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ ê²°ê³¼ ì „ì†¡ ì†ë„ê°€ ë¹ ë¥´ì§€ë§Œ ë°ì´í„°ê°€ ëˆ„ë½ë  ê°€ëŠ¥ì„±ì´ ìˆë‹¤. 
![](assets/udp-header.png)

### UDP ê°€ ë¹ ë¥¸ì´ìœ ?
- ì‹ ë¢°ì„± ê²€ì¦ì„ ìœ„í•œ ì ˆì°¨ê°€ ì—†ê³ , ì—°ê²°(**Handshake**)ì„ ì„¤ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.
- **TCP**ì˜ ê²½ìš° ì‹ ë¢°ì„± ê²€ì¦(`íë¦„ì œì–´`, `ì˜¤ë¥˜ì œì–´`, `í˜¼ì¡ì œì–´`) ë¥¼ ìœ„í•´ ì—¬ëŸ¬ ìµœì†Œ `20Bytes` ì´ìƒì˜ í—¤ë”ê°’ì„ ì‚¬ìš©í•˜ì§€ë§Œ **UDP**í—¤ë”ëŠ” `8Bytes`ë¡œ ê°„ë‹¨íˆ êµ¬ì„±ë¨.
- ë‹¹ì—°íˆ í†µì‹  ì‹œ íë¦„ì œì–´, ì˜¤ë¥˜ì œì–´, í˜¼ì¡ì œì–´ ë“±ì˜ ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë¹ ë¥¼ ìˆ˜ ë°–ì— ì—†ë‹¤.

### UDPë¥¼ í™œìš©í•œ í†µì‹ ë°©ì‹
![](assets/udp-broadcasting.png)

- `ìœ ë‹ˆìºìŠ¤íŒ…` : **TCP** ì˜ ê²½ìš° ìœ ë‹ˆìºìŠ¤íŒ… ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤. 
- `ë¸Œë¡œë“œìºìŠ¤íŒ…` : ë„¤íŠ¸ì›Œí¬ ìƒì˜ ëª¨ë“  ê¸°ê¸°ì— ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë°©ì‹.
  - ì£¼ë¡œ ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ì—ì„œë§Œ ì‚¬ìš©ë˜ë©°, ëŒ€ê·œëª¨ ë„¤íŠ¸ì›Œí¬(ì¸í„°ë„·) ì—ì„œëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.
- `ë©€í‹°ìºìŠ¤íŒ…` : ì§€ì •ëœ ì—¬ëŸ¬ ìˆ˜ì‹ ì ê·¸ë£¹ì—ë§Œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë°©ì‹.
  - ë„¤íŠ¸ì›Œí¬ íš¨ìœ¨ì´ ë†’ì–´ì§€ê³ , VoIPë‚˜ ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° ë“±ì—ì„œ ë§ì´ ì‚¬ìš©ëœë‹¤.


>HTTP/3 ê°€ UDPë¥¼ ì„ íƒí•œ ì´ìœ ...

### ì°¸ì¡°
[NW-ğŸŒ-ì•„ì§ë„-ëª¨í˜¸í•œ-TCP-UDP-ê°œë…-â“-ì‰½ê²Œ-ì´í•´í•˜ì](https://inpa.tistory.com/entry/NW-%F0%9F%8C%90-%EC%95%84%EC%A7%81%EB%8F%84-%EB%AA%A8%ED%98%B8%ED%95%9C-TCP-UDP-%EA%B0%9C%EB%85%90-%E2%9D%93-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EC%9E%90)   
[ë„¤íŠ¸ì›Œí¬-ê³„ì¸µë³„-í”„ë¡œí† ì½œLayer-Protocol](https://velog.io/@mingkimk/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B3%84%EC%B8%B5%EB%B3%84-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9CLayer-Protocol)   
[ì›¹ì†Œì¼“ìœ¼ë¡œ ê°œë°œí•˜ê¸° ì „ ì•Œì•„ì•¼ í•  ê²ƒë“¤](https://yozm.wishket.com/magazine/detail/1911/)   
[TCPì˜ ì—°ê²°ì„¤ì •, ë°ì´í„° ì „ì†¡, ì—°ê²° í•´ì œ](https://hongcana.tistory.com/76)   
[TCPì˜ í—¤ë”ì—ëŠ” ì–´ë–¤ ì •ë³´ë“¤ì´ ë‹´ê²¨ìˆëŠ”ê±¸ê¹Œ?](https://evan-moon.github.io/2019/11/10/header-of-tcp/#%ED%8C%A8%ED%82%B7-%EA%B5%90%ED%99%98-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90)   
[HTTP/3ëŠ” ì™œ UDPë¥¼ ì„ íƒí•œ ê²ƒì¼ê¹Œ?](https://evan-moon.github.io/2019/10/08/what-is-http3/)   
[UDP - ë¸Œë¡œë“œìºìŠ¤íŒ… Broadcasting](https://blog.naver.com/kbm0996/221045822230)

